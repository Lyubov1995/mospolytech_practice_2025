<!DOCTYPE html>
<html>
<head>
    <title>Интерактивная диаграмма проблем</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            padding: 40px 20px;
            width: 100%;
        }
        
        h1 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .subtitle {
            color: #4a5568;
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .diagram-container {
            width: 100%;
            max-width: 900px;
            margin: 20px auto;
           
        }
        
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .node-circle {
            transition: all 0.3s ease;
        }
        
        .node:hover .node-circle {
            filter: drop-shadow(0 0 8px rgba(110, 69, 226, 0.4));
            transform: scale(1.05);
        }
        
        .node-text {
            font-size: 0.9rem;
            font-weight: 600;
            fill: #2d3748;
            text-anchor: middle;
            pointer-events: none;
        }
        
        .link {
            stroke: #cbd5e0;
            stroke-width: 2;
            transition: all 0.3s ease;
        }
        
        .central-circle {
            fill: #6e45e2;
            stroke: #fff;
            stroke-width: 3;
            filter: drop-shadow(0 0 10px rgba(110, 69, 226, 0.5));
        }
        
        .central-text {
            font-size: 1.2rem;
            font-weight: 700;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
        }
        
        .problem-detail {
            position: absolute;
            background: white;
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            max-width: 300px;
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            z-index: 10;
            overflow: hidden;
        }
        
        .problem-header {
            background: linear-gradient(135deg, #6e45e2, #88d3ce);
            color: white;
            padding: 15px 20px;
            margin: 0;
        }
        
        .problem-content {
            padding: 20px;
            color: #4a5568;
            line-height: 1.6;
        }
        
        .highlight {
            color: #6e45e2;
            font-weight: 600;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .close-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        .expanded {
            transform: scale(1.3);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .node-text {
                font-size: 0.8rem;
            }
            
            .problem-detail {
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Интерактивная диаграмма проблем</h1>
        <p class="subtitle">Нажмите на круги, чтобы раскрыть подробности каждой проблемы</p>
    </div>
    
    <div class="diagram-container">
        <svg id="diagram" width="100%" height="600"></svg>
        
        <div class="problem-detail" id="problem1-detail">
            <div class="problem-header">
                <h3>Ограниченная персонализация</h3>
                <button class="close-btn">×</button>
            </div>
            <div class="problem-content">
                <p>Существующие решения предлагают <span class="highlight">шаблонные модели</span>, не позволяющие создать уникальный цифровой образ:</p>
                <ul>
                    <li>Ограниченный выбор стилей</li>
                    <li>Невозможность тонкой настройки</li>
                    <li>Отсутствие адаптации под индивидуальные особенности</li>
                </ul>
            </div>
        </div>
        
        <div class="problem-detail" id="problem2-detail">
            <div class="problem-header">
                <h3>Высокий порог входа</h3>
                <button class="close-btn">×</button>
            </div>
            <div class="problem-content">
                <p>Для создания качественных аватаров требуются:</p>
                <ul>
                    <li><span class="highlight">Специальные навыки</span> 3D-моделирования</li>
                    <li>Дорогостоящее программное обеспечение</li>
                    <li>Мощное компьютерное оборудование</li>
                </ul>
                <p>Это делает технологию недоступной для большинства пользователей.</p>
            </div>
        </div>
        
        <div class="problem-detail" id="problem3-detail">
            <div class="problem-header">
                <h3>Невыразительность</h3>
                <button class="close-btn">×</button>
            </div>
            <div class="problem-content">
                <p>Аватары часто не передают важные аспекты личности:</p>
                <ul>
                    <li><span class="highlight">Эмоции</span> и мимику</li>
                    <li>Особенности внешности</li>
                    <li>Характерные жесты и позы</li>
                </ul>
                <p>Это снижает их ценность для социального взаимодействия.</p>
            </div>
        </div>
        
        <div class="problem-detail" id="problem4-detail">
            <div class="problem-header">
                <h3>AI-барьер</h3>
                <button class="close-btn">×</button>
            </div>
            <div class="problem-content">
                <p>Сложность внедрения технологий <span class="highlight">искусственного интеллекта</span>:</p>
                <ul>
                    <li>Требуется техническая экспертиза</li>
                    <li>Высокая стоимость решений</li>
                    <li>Сложность интеграции с существующими системами</li>
                </ul>
                <p>Это ограничивает возможности персонализации для обычных пользователей.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const width = Math.min(900, window.innerWidth - 40);
            const height = 600;
            const center = { x: width / 2, y: height / 2 };
            
            const problems = [
                {
                    id: "problem1",
                    name: "Шаблонность",
                    angle: Math.PI * 0.25,
                    distance: 180,
                    detail: "problem1-detail",
                    color: "#88d3ce"
                },
                {
                    id: "problem2",
                    name: "Сложность",
                    angle: Math.PI * 0.75,
                    distance: 180,
                    detail: "problem2-detail",
                    color: "#ff9a76"
                },
                {
                    id: "problem3",
                    name: "Невыразительность",
                    angle: Math.PI * 1.25,
                    distance: 180,
                    detail: "problem3-detail",
                    color: "#a18cd1"
                },
                {
                    id: "problem4",
                    name: "AI-барьер",
                    angle: Math.PI * 1.75,
                    distance: 180,
                    detail: "problem4-detail",
                    color: "#84fab0"
                }
            ];
            
            const svg = d3.select("#diagram")
                .attr("viewBox", `0 0 ${width} ${height}`)
                .attr("preserveAspectRatio", "xMidYMid meet");
            
            // Создаем связи
            problems.forEach(problem => {
                svg.append("line")
                    .attr("class", "link")
                    .attr("x1", center.x)
                    .attr("y1", center.y)
                    .attr("x2", center.x + Math.cos(problem.angle) * problem.distance)
                    .attr("y2", center.y + Math.sin(problem.angle) * problem.distance);
            });
            
            // Центральный круг
            svg.append("circle")
                .attr("class", "central-circle")
                .attr("cx", center.x)
                .attr("cy", center.y)
                .attr("r", 80);
                
            svg.append("text")
                .attr("class", "central-text")
                .attr("x", center.x)
                .attr("y", center.y + 8)
                .text("Проблемы");
            
            // Создаем узлы проблем
            problems.forEach(problem => {
                const nodeGroup = svg.append("g")
                    .attr("class", "node")
                    .attr("id", problem.id)
                    .attr("transform", `translate(${center.x + Math.cos(problem.angle) * problem.distance}, ${center.y + Math.sin(problem.angle) * problem.distance})`);
                
                nodeGroup.append("circle")
                    .attr("class", "node-circle")
                    .attr("r", 60)
                    .attr("fill", problem.color);
                
                nodeGroup.append("text")
                    .attr("class", "node-text")
                    .attr("dy", 5)
                    .text(problem.name);
                
                // Обработчики событий
                nodeGroup.on("click", function() {
                    // Закрываем все открытые детали
                    document.querySelectorAll('.problem-detail').forEach(detail => {
                        detail.style.opacity = "0";
                        detail.style.pointerEvents = "none";
                        detail.style.transform = "scale(0.9)";
                    });
                    
                    // Убираем класс expanded у всех узлов
                    svg.selectAll('.node-circle').classed('expanded', false);
                    
                    // Показываем выбранную деталь
                    const detail = document.getElementById(problem.detail);
                    detail.style.opacity = "1";
                    detail.style.pointerEvents = "auto";
                    detail.style.transform = "scale(1)";
                    
                    // Позиционируем деталь
                    const xPos = center.x + Math.cos(problem.angle) * (problem.distance + 120);
                    const yPos = center.y + Math.sin(problem.angle) * (problem.distance + 120);
                    
                    detail.style.left = `${xPos - 150}px`;
                    detail.style.top = `${yPos - 100}px`;
                    
                    // Добавляем класс expanded к текущему узлу
                    d3.select(this).select('.node-circle').classed('expanded', true);
                });
            });
            
            // Закрытие деталей по кнопке
            document.querySelectorAll('.close-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const detail = this.closest('.problem-detail');
                    detail.style.opacity = "0";
                    detail.style.pointerEvents = "none";
                    detail.style.transform = "scale(0.9)";
                    
                    // Убираем класс expanded у всех узлов
                    svg.selectAll('.node-circle').classed('expanded', false);
                });
            });
            
            // Анимация при загрузке
            svg.selectAll(".link")
                .attr("stroke-dasharray", function() { return this.getTotalLength() + " " + this.getTotalLength(); })
                .attr("stroke-dashoffset", function() { return this.getTotalLength(); })
                .transition()
                .duration(1000)
                .attr("stroke-dashoffset", 0);
        });
    </script>
</body>
</html>